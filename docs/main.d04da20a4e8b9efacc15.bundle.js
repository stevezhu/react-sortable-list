(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1247:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(443);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1270)],module)}.call(this,__webpack_require__(1248)(module))},1270:function(module,exports,__webpack_require__){var map={"./SortableList/index.stories.tsx":1275};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1270},1275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"withDefault",(function(){return withDefault}));var emotion_esm=__webpack_require__(191),react=__webpack_require__(0),react_default=__webpack_require__.n(react),array_move=__webpack_require__(444),array_move_default=__webpack_require__.n(array_move),react_draggable_min=__webpack_require__(445),react_draggable_min_default=__webpack_require__.n(react_draggable_min),hooks=__webpack_require__(1280);const styles={root:emotion_esm.a`
    position: relative;

    .react-draggable {
      /* prevent collapsing margins https://www.w3.org/TR/CSS2/box.html#collapsing-margins */
      overflow: auto;
    }
  `};var es6_react=__webpack_require__(446),es6_react_default=__webpack_require__.n(es6_react);function calcOffsetBounds({offsetTop:originalTop,offsetLeft:originalLeft,offsetWidth:width,offsetHeight:height},offset){const top=originalTop+offset.y,left=originalLeft+offset.x;return{top:top,bottom:top+height,left:left,right:left+width}}function prevIfEqual(prev,next){return es6_react_default()(prev,next)?prev:next}try{calcOffsetBounds.displayName="calcOffsetBounds",calcOffsetBounds.__docgenInfo={description:"@param element The element to calculate the offset relative to.\n@param offset The offset.\n@return The bounds of an HTMLElement with an offset.",displayName:"calcOffsetBounds",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SortableList/util.ts#calcOffsetBounds"]={docgenInfo:calcOffsetBounds.__docgenInfo,name:"calcOffsetBounds",path:"src/SortableList/util.ts#calcOffsetBounds"})}catch(__react_docgen_typescript_loader_error){}try{prevIfEqual.displayName="prevIfEqual",prevIfEqual.__docgenInfo={description:"@param prev\n@param next\n@returns `prev` if `prev` and `next` are deeply equal, `next` otherwise",displayName:"prevIfEqual",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SortableList/util.ts#prevIfEqual"]={docgenInfo:prevIfEqual.__docgenInfo,name:"prevIfEqual",path:"src/SortableList/util.ts#prevIfEqual"})}catch(__react_docgen_typescript_loader_error){}const INITIAL_OFFSET=Object.freeze({x:0,y:0});function initialOffsets(length){return Array(length).fill(INITIAL_OFFSET)}function useSortableOffsets(length,swapThreshold){const[offsets,setOffsets]=Object(react.useState)(()=>initialOffsets(length)),resetOffsets=()=>{setOffsets(prev=>prevIfEqual(prev,initialOffsets(length)))};return Object(react.useEffect)(resetOffsets,[length]),{offsets:offsets,resetOffsets:resetOffsets,updateOffsets(dragEl,dragOffset){setOffsets(prevOffsets=>prevIfEqual(prevOffsets,function calcNewOffsets(dragEl,dragOffset,offsets,swapThreshold){var _dragEl$parentNode$ch,_dragEl$parentNode;const elements=Array.from(null!==(_dragEl$parentNode$ch=null===(_dragEl$parentNode=dragEl.parentNode)||void 0===_dragEl$parentNode?void 0:_dragEl$parentNode.children)&&void 0!==_dragEl$parentNode$ch?_dragEl$parentNode$ch:[]),dragBounds=calcOffsetBounds(dragEl,dragOffset);let passedDragEl=!1;return elements.map((el,i)=>{if(el===dragEl)return passedDragEl=!0,offsets[i];const elOffset=offsets[i],elBounds=calcOffsetBounds(el,elOffset);return((0===elOffset.y?!passedDragEl:passedDragEl)?elBounds.bottom-dragBounds.top:dragBounds.bottom-elBounds.top)>=el.offsetHeight*swapThreshold?0!==elOffset.y?{x:0,y:0}:passedDragEl?{x:0,y:-dragEl.offsetHeight}:{x:0,y:dragEl.offsetHeight}:elOffset})}(dragEl,dragOffset,prevOffsets,swapThreshold)))}}}function SortableList({children:SortableComponent,list:list,setList:setList,transitionDuration:transitionDuration=300,swapThreshold:swapThreshold=.5}){swapThreshold=Math.max(.5,Math.min(swapThreshold,1));const seed=Object(hooks.a)(),[bounds,setBounds]=Object(react.useState)("parent"),{offsets:offsets,resetOffsets:resetOffsets,updateOffsets:updateOffsets}=useSortableOffsets(list.length,swapThreshold);return react_default.a.createElement("div",{className:styles.root},list.map((item,index)=>react_default.a.createElement(react_draggable_min_default.a,{key:seed(item),axis:"y",position:offsets[index],bounds:bounds,onStart:(e,data)=>{setTransitionDurations(data.node,transitionDuration),setBounds(function calcDragBounds(el){const{offsetParent:offsetParent}=el;if(null===offsetParent)return"parent";const{offsetTop:offsetTop}=el,elBottom=offsetTop+el.offsetHeight,offsetBottom=offsetParent.scrollHeight-elBottom;return{left:0,right:0,top:-offsetTop,bottom:offsetBottom}}(data.node))},onDrag:(e,data)=>updateOffsets(data.node,data),onStop:(e,data)=>{setTransitionDurations(data.node),setBounds("parent"),resetOffsets();const newIndex=function getNewIndex(oldIndex,positions){return positions.reduce((index,position)=>position.y<0?index+1:position.y>0?index-1:index,oldIndex)}(index,offsets);index!==newIndex&&setList(array_move_default()(list,index,newIndex))}},react_default.a.createElement("div",null,react_default.a.createElement(SortableComponent,{item:item,index:index})))))}function setTransitionDurations(dragEl,duration){var _dragEl$parentNode$ch,_dragEl$parentNode;const elements=null!==(_dragEl$parentNode$ch=null===(_dragEl$parentNode=dragEl.parentNode)||void 0===_dragEl$parentNode?void 0:_dragEl$parentNode.children)&&void 0!==_dragEl$parentNode$ch?_dragEl$parentNode$ch:[],transitionDuration=void 0!==duration?`${duration}ms`:"";for(const el of elements)if(el!==dragEl){el.style.transitionDuration=transitionDuration}}try{SortableList.displayName="SortableList",SortableList.__docgenInfo={description:"",displayName:"SortableList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"T[]"}},setList:{defaultValue:null,description:"",name:"setList",required:!0,type:{name:"Dispatch<SetStateAction<T[]>>"}},transitionDuration:{defaultValue:{value:300},description:"The duration in milliseconds the transition animation should take.",name:"transitionDuration",required:!1,type:{name:"number"}},swapThreshold:{defaultValue:{value:.5},description:"The empty space that is available as a percentage of element height before the element swaps.\n\nFor example, if an element is 100px in height and swapThreshold is 0.5, then the element would\nswap once 50px of space is availabe.\n\nValid values are 0.5 ≤ `swapThreshold` ≤ 1\n\n`swapThreshold` cannot be less than 0.5 because otherwise the element would continuously flip\nback and forth. This is because once the element swaps, there is exactly half of the space\nleft at the original position.",name:"swapThreshold",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/SortableList/index.tsx#SortableList"]={docgenInfo:SortableList.__docgenInfo,name:"SortableList",path:"src/SortableList/index.tsx#SortableList"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(183).withSource;var addSourceDecorator=__webpack_require__(183).addSource,__SOURCE_PREFIX__=(__webpack_require__(183).withSource,addSourceDecorator=__webpack_require__(183).addSource,"/mnt/d/Development/react-sortable-list/src/SortableList"),__STORY__="import { css } from 'emotion'\nimport React, { useState } from 'react'\nimport { SortableList } from '.'\n\nexport default {\n  title: 'SortableList',\n  components: SortableList,\n}\n\nconst heights = Array<number>(10)\n  .fill(0)\n  .map(() => Math.random() * 400 + 30)\n\nexport const withDefault = () => {\n  const [list, setList] = useState<{ id: number }[]>([\n    { id: 0 },\n    { id: 1 },\n    { id: 2 },\n    { id: 3 },\n    { id: 4 },\n  ])\n  return (\n    <SortableList list={list} setList={setList} swapThreshold={0.5}>\n      {({ item, index }) => {\n        return (\n          <div\n            className={css`\n              background-color: red;\n              border: 5px solid blue;\n              margin-bottom: 10px;\n            `}\n            style={{ height: heights[item.id] }}\n          >\n            {item.id}\n          </div>\n        )\n      }}\n    </SortableList>\n  )\n}\n",__ADDS_MAP__={"sortablelist--with-default":{startLoc:{col:27,line:14},endLoc:{col:1,line:40},startBody:{col:27,line:14},endBody:{col:1,line:40}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={};__webpack_exports__.default={parameters:{storySource:{source:'\n\n// @ts-nocheck\n// @ts-ignore\nvar withSourceLoader = require(\'@storybook/source-loader/preview\').withSource;\n// @ts-ignore\nvar addSourceDecorator = require("@storybook/source-loader/preview").addSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = "/mnt/d/Development/react-sortable-list/src/SortableList";\n// @ts-ignore\nvar __STORY__ = "import { css } from \'emotion\'\\nimport React, { useState } from \'react\'\\nimport { SortableList } from \'.\'\\n\\nexport default {\\n  title: \'SortableList\',\\n  components: SortableList,\\n}\\n\\nconst heights = Array<number>(10)\\n  .fill(0)\\n  .map(() => Math.random() * 400 + 30)\\n\\nexport const withDefault = () => {\\n  const [list, setList] = useState<{ id: number }[]>([\\n    { id: 0 },\\n    { id: 1 },\\n    { id: 2 },\\n    { id: 3 },\\n    { id: 4 },\\n  ])\\n  return (\\n    <SortableList list={list} setList={setList} swapThreshold={0.5}>\\n      {({ item, index }) => {\\n        return (\\n          <div\\n            className={css`\\n              background-color: red;\\n              border: 5px solid blue;\\n              margin-bottom: 10px;\\n            `}\\n            style={{ height: heights[item.id] }}\\n          >\\n            {item.id}\\n          </div>\\n        )\\n      }}\\n    </SortableList>\\n  )\\n}\\n";\n// @ts-ignore\nvar __ADDS_MAP__ = {"sortablelist--with-default":{"startLoc":{"col":27,"line":14},"endLoc":{"col":1,"line":40},"startBody":{"col":27,"line":14},"endBody":{"col":1,"line":40}}};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = "/index.stories.tsx";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\n        \nimport { css } from \'emotion\'\nimport React, { useState } from \'react\'\nimport { SortableList } from \'.\'\n\nexport default {parameters: {"storySource":{"source":"import { css } from \'emotion\'\\nimport React, { useState } from \'react\'\\nimport { SortableList } from \'.\'\\n\\nexport default {\\n  title: \'SortableList\',\\n  components: SortableList,\\n}\\n\\nconst heights = Array<number>(10)\\n  .fill(0)\\n  .map(() => Math.random() * 400 + 30)\\n\\nexport const withDefault = () => {\\n  const [list, setList] = useState<{ id: number }[]>([\\n    { id: 0 },\\n    { id: 1 },\\n    { id: 2 },\\n    { id: 3 },\\n    { id: 4 },\\n  ])\\n  return (\\n    <SortableList list={list} setList={setList} swapThreshold={0.5}>\\n      {({ item, index }) => {\\n        return (\\n          <div\\n            className={css`\\n              background-color: red;\\n              border: 5px solid blue;\\n              margin-bottom: 10px;\\n            `}\\n            style={{ height: heights[item.id] }}\\n          >\\n            {item.id}\\n          </div>\\n        )\\n      }}\\n    </SortableList>\\n  )\\n}\\n","locationsMap":{"sortablelist--with-default":{"startLoc":{"col":27,"line":14},"endLoc":{"col":1,"line":40},"startBody":{"col":27,"line":14},"endBody":{"col":1,"line":40}}}},},\n  title: \'SortableList\',\n  components: SortableList,\n}\n\nconst heights = Array<number>(10)\n  .fill(0)\n  .map(() => Math.random() * 400 + 30)\n\nexport const withDefault = addSourceDecorator(() => {\n  const [list, setList] = useState<{ id: number }[]>([\n    { id: 0 },\n    { id: 1 },\n    { id: 2 },\n    { id: 3 },\n    { id: 4 },\n  ])\n  return (\n    <SortableList list={list} setList={setList} swapThreshold={0.5}>\n      {({ item, index }) => {\n        return (\n          <div\n            className={css`\n              background-color: red;\n              border: 5px solid blue;\n              margin-bottom: 10px;\n            `}\n            style={{ height: heights[item.id] }}\n          >\n            {item.id}\n          </div>\n        )\n      }}\n    </SortableList>\n  )\n}, {__STORY__, __ADDS_MAP__,__MAIN_FILE_LOCATION__,__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__});',locationsMap:{"sortablelist--with-default":{startLoc:{col:27,line:36},endLoc:{col:139,line:62},startBody:{col:27,line:36},endBody:{col:139,line:62}}}},storySource:{source:"import { css } from 'emotion'\nimport React, { useState } from 'react'\nimport { SortableList } from '.'\n\nexport default {\n  title: 'SortableList',\n  components: SortableList,\n}\n\nconst heights = Array<number>(10)\n  .fill(0)\n  .map(() => Math.random() * 400 + 30)\n\nexport const withDefault = () => {\n  const [list, setList] = useState<{ id: number }[]>([\n    { id: 0 },\n    { id: 1 },\n    { id: 2 },\n    { id: 3 },\n    { id: 4 },\n  ])\n  return (\n    <SortableList list={list} setList={setList} swapThreshold={0.5}>\n      {({ item, index }) => {\n        return (\n          <div\n            className={css`\n              background-color: red;\n              border: 5px solid blue;\n              margin-bottom: 10px;\n            `}\n            style={{ height: heights[item.id] }}\n          >\n            {item.id}\n          </div>\n        )\n      }}\n    </SortableList>\n  )\n}\n",locationsMap:{"sortablelist--with-default":{startLoc:{col:27,line:14},endLoc:{col:1,line:40},startBody:{col:27,line:14},endBody:{col:1,line:40}}}}},title:"SortableList",components:SortableList};const heights=Array(10).fill(0).map(()=>400*Math.random()+30),withDefault=addSourceDecorator(addSourceDecorator(()=>{const[list,setList]=Object(react.useState)([{id:0},{id:1},{id:2},{id:3},{id:4}]);return react_default.a.createElement(SortableList,{list:list,setList:setList,swapThreshold:.5},({item:item,index:index})=>react_default.a.createElement("div",{className:emotion_esm.a`
              background-color: red;
              border: 5px solid blue;
              margin-bottom: 10px;
            `,style:{height:heights[item.id]}},item.id))},{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/index.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/index.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__})},447:function(module,exports,__webpack_require__){__webpack_require__(448),__webpack_require__(591),__webpack_require__(592),__webpack_require__(1246),module.exports=__webpack_require__(1247)},510:function(module,exports){}},[[447,1,2]]]);
//# sourceMappingURL=main.d04da20a4e8b9efacc15.bundle.js.map